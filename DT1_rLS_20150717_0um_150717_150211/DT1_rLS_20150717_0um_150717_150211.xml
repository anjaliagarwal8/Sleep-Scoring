<?xml version='1.0'?>
<parameters version="1.0" creator="ndManager-">
 <generalInfo>
  <date>2015-07-17</date>
  <experimenters>david</experimenters>
  <description/>
  <notes/>
 </generalInfo>
 <acquisitionSystem>
  <nBits>16</nBits>
  <nChannels>32</nChannels>
  <samplingRate>20000</samplingRate>
  <voltageRange>20</voltageRange>
  <amplification>1000</amplification>
  <offset>0</offset>
 </acquisitionSystem>
 <fieldPotentials>
  <lfpSamplingRate>1250</lfpSamplingRate>
 </fieldPotentials>
 <files>
  <file>
   <extension>lfp</extension>
   <samplingRate>1250</samplingRate>
  </file>
 </files>
 <anatomicalDescription>
  <channelGroups>
   <group>
    <channel skip="0">24</channel>
    <channel skip="0">25</channel>
    <channel skip="0">27</channel>
   </group>
   <group>
    <channel skip="0">20</channel>
    <channel skip="0">21</channel>
    <channel skip="0">22</channel>
    <channel skip="0">23</channel>
   </group>
   <group>
    <channel skip="0">16</channel>
    <channel skip="0">17</channel>
    <channel skip="0">18</channel>
    <channel skip="0">19</channel>
   </group>
   <group>
    <channel skip="0">12</channel>
    <channel skip="0">13</channel>
    <channel skip="0">14</channel>
    <channel skip="0">15</channel>
   </group>
   <group>
    <channel skip="0">8</channel>
    <channel skip="0">9</channel>
    <channel skip="0">10</channel>
    <channel skip="0">11</channel>
   </group>
   <group>
    <channel skip="0">4</channel>
    <channel skip="0">5</channel>
    <channel skip="0">6</channel>
   </group>
   <group>
    <channel skip="0">28</channel>
    <channel skip="0">29</channel>
    <channel skip="0">30</channel>
    <channel skip="0">31</channel>
   </group>
   <group>
    <channel skip="0">0</channel>
    <channel skip="0">1</channel>
    <channel skip="0">2</channel>
    <channel skip="0">3</channel>
   </group>
  </channelGroups>
 </anatomicalDescription>
 <spikeDetection>
  <channelGroups>
   <group>
    <channels>
     <channel>24</channel>
     <channel>25</channel>
     <channel>27</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>20</channel>
     <channel>21</channel>
     <channel>22</channel>
     <channel>23</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>16</channel>
     <channel>17</channel>
     <channel>18</channel>
     <channel>19</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>12</channel>
     <channel>13</channel>
     <channel>14</channel>
     <channel>15</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>8</channel>
     <channel>9</channel>
     <channel>10</channel>
     <channel>11</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>4</channel>
     <channel>5</channel>
     <channel>6</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>28</channel>
     <channel>29</channel>
     <channel>30</channel>
     <channel>31</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
   <group>
    <channels>
     <channel>0</channel>
     <channel>1</channel>
     <channel>2</channel>
     <channel>3</channel>
    </channels>
    <nSamples>32</nSamples>
    <peakSampleIndex>16</peakSampleIndex>
    <nFeatures>3</nFeatures>
   </group>
  </channelGroups>
 </spikeDetection>
 <units>
  <unit>
   <group>1</group>
   <cluster>20</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>21</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>27</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>28</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>37</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>49</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>50</cluster>
   <structure/>
   <type/>
   <isolationDistance/>
   <quality/>
   <notes/>
  </unit>
  <unit>
   <group>1</group>
   <cluster>51</cluster>
   <structure>--</structure>
   <type>--</type>
   <isolationDistance>--</isolationDistance>
   <quality>--</quality>
   <notes>--</notes>
  </unit>
  <unit>
   <group>1</group>
   <cluster>52</cluster>
   <structure>--</structure>
   <type>--</type>
   <isolationDistance>--</isolationDistance>
   <quality>--</quality>
   <notes>--</notes>
  </unit>
  <unit>
   <group>1</group>
   <cluster>53</cluster>
   <structure>--</structure>
   <type>--</type>
   <isolationDistance>--</isolationDistance>
   <quality>--</quality>
   <notes>--</notes>
  </unit>
 </units>
 <neuroscope version="2.0.0">
  <miscellaneous>
   <screenGain>0.2</screenGain>
   <traceBackgroundImage></traceBackgroundImage>
  </miscellaneous>
  <video>
   <rotate>0</rotate>
   <flip>0</flip>
   <videoImage></videoImage>
   <positionsBackground>0</positionsBackground>
  </video>
  <spikes>
   <nSamples>32</nSamples>
   <peakSampleIndex>16</peakSampleIndex>
  </spikes>
  <channels>
   <channelColors>
    <channel>0</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>0</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>1</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>1</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>2</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>2</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>3</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>3</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>4</channel>
    <color>#ffff00</color>
    <anatomyColor>#ffff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>4</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>5</channel>
    <color>#ffff00</color>
    <anatomyColor>#ffff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>5</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>6</channel>
    <color>#ffff00</color>
    <anatomyColor>#ffff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>6</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>7</channel>
    <color>#0080ff</color>
    <anatomyColor>#0080ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>7</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>8</channel>
    <color>#8811ff</color>
    <anatomyColor>#8811ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>8</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>9</channel>
    <color>#8811ff</color>
    <anatomyColor>#8811ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>9</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>10</channel>
    <color>#8811ff</color>
    <anatomyColor>#8811ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>10</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>11</channel>
    <color>#8811ff</color>
    <anatomyColor>#8811ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>11</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>12</channel>
    <color>#f70aff</color>
    <anatomyColor>#f70aff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>12</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>13</channel>
    <color>#f70aff</color>
    <anatomyColor>#f70aff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>13</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>14</channel>
    <color>#f70aff</color>
    <anatomyColor>#f70aff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>14</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>15</channel>
    <color>#f70aff</color>
    <anatomyColor>#f70aff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>15</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>16</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>16</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>17</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>17</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>18</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>18</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>19</channel>
    <color>#00ffff</color>
    <anatomyColor>#00ffff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>19</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>20</channel>
    <color>#ff0526</color>
    <anatomyColor>#ff0526</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>20</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>21</channel>
    <color>#ff0526</color>
    <anatomyColor>#ff0526</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>21</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>22</channel>
    <color>#ff0526</color>
    <anatomyColor>#ff0526</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>22</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>23</channel>
    <color>#ff0526</color>
    <anatomyColor>#ff0526</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>23</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>24</channel>
    <color>#0080ff</color>
    <anatomyColor>#0080ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>24</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>25</channel>
    <color>#0080ff</color>
    <anatomyColor>#0080ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>25</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>26</channel>
    <color>#0080ff</color>
    <anatomyColor>#0080ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>26</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>27</channel>
    <color>#0080ff</color>
    <anatomyColor>#0080ff</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>27</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>28</channel>
    <color>#00ff00</color>
    <anatomyColor>#00ff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>28</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>29</channel>
    <color>#00ff00</color>
    <anatomyColor>#00ff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>29</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>30</channel>
    <color>#00ff00</color>
    <anatomyColor>#00ff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>30</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
   <channelColors>
    <channel>31</channel>
    <color>#00ff00</color>
    <anatomyColor>#00ff00</anatomyColor>
    <spikeColor>#0080ff</spikeColor>
   </channelColors>
   <channelOffset>
    <channel>31</channel>
    <defaultOffset>0</defaultOffset>
   </channelOffset>
  </channels>
 </neuroscope>
 <programs>
  <program>
   <name>ndm_extractleds</name>
   <parameters>
    <parameter>
     <name>suffix</name>
     <value/>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>useTrackerData</name>
     <value>true</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>threshold</name>
     <value>90</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>extension</name>
     <value>avi</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>show</name>
     <value>false</value>
     <status>Mandatory</status>
    </parameter>
   </parameters>
   <help>Extract LEDs (= bright spots) from a video file.

For each video frame, all bright spots are detected and listed in a .spots file, one line per spot, listing on successive columns the frame number, number of pixels in the spot, x and y coordinates of the spot center, x and y sizes of the spot (defined as standard deviations of the distributions of x and y coordinates of all the pixels in the spot), and spot color (as a YCrCb triplet).

PARAMETERS

# suffix

Suffix of the directory where the video file is located

# useTrackerData

Depending on the acquisition systems, the successive positions of the LEDs across time can be extracted from either the video file, or the online tracking file if such a feature is available (e.g. Neuralynx systems). Because in some configurations both video and tracking files may be recorded in parallel, it is necessary to explicitly request one of the above two methods.

# threshold

Bright spots consist of pixels brighter than this threshold (from 0 to 255)

# extension

Extension of the video file (e.g. avi, mpg, etc.)

# show

Whether the video should be displayed during LED extraction
(hiding the video yields faster processing, especially over network connections)
</help>
  </program>
  <program>
   <name>ndm_extractspikes</name>
   <parameters>
    <parameter>
     <name>thresholdFactor</name>
     <value>1.3</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>refractoryPeriod</name>
     <value>16</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>peakSearchLength</name>
     <value>32</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>start</name>
     <value>120</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>duration</name>
     <value>120</value>
     <status>Mandatory</status>
    </parameter>
   </parameters>
   <help>Extract spikes from high-pass filtered .fil file (this creates .res and .spk files).

First, the program automatically computes a baseline 'noise' level, using a subset of the data. Then, spikes are extracted whenever the signal crosses a threshold proportional to the baseline 'noise' level. To avoid spurious detections, the signal must have a local maximum (or minimum, depending on the sign of the signal) within a fixed search window starting at threshold crossing. Also, the duration between consecutive spikes must be greater than a fixed 'refractory' period.

PARAMETERS

# thresholdFactor

Threshold = thresholdFactor * baseline 'noise' level

# refractoryPeriod

Number of samples to skip after a spike, before trying to detect a new spike

# peakSearchLength

Length of the peak search window (in number of samples)

# start

Starting point in the file (in s) for computation of baseline 'noise' level

# duration

Duration (in s) for computation of baseline 'noise' level
</help>
  </program>
  <program>
   <name>ndm_hipass</name>
   <parameters>
    <parameter>
     <name>windowHalfLength</name>
     <value>16</value>
     <status>Mandatory</status>
    </parameter>
   </parameters>
   <help>High-pass filter a .dat file (required for spike extraction).

The program uses a median-based (non-linear) filter to minimize spike waveform distortion.

PARAMETERS

# windowHalfWidth

Determines the cutoff frequency
</help>
  </program>
  <program>
   <name>ndm_lfp</name>
   <parameters>
    <parameter>
     <name>samplingRate</name>
     <value>1250</value>
     <status>Mandatory</status>
    </parameter>
   </parameters>
   <help>Downsample a .dat file to create the corresponding LFP file.

PARAMETERS

# samplingRate

Target sampling rate (default = 1250Hz)</help>
  </program>
  <program>
   <name>ndm_pca</name>
   <parameters>
    <parameter>
     <name>before</name>
     <value>6</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>after</name>
     <value>6</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>extra</name>
     <value>false</value>
     <status>Mandatory</status>
    </parameter>
   </parameters>
   <help>Compute principal component analysis (PCA).

PARAMETERS

All mandatory parameters are defined in the 'Acquisition System' and 'Spike Groups' tab.

OPTIONAL PARAMETERS

# before

Number of samples before the peak to use for the PCA. This can be either a space-separated list of numbers (one per electrode group), or a single common number for all groups.

# after

Number of samples after the peak to use for the PCA. This can be either a space-separated list of numbers (one per electrode group), or a single common number for all groups.

# extra

Whether extra features (spike peak value) should be included in the output files.</help>
  </program>
  <program>
   <name>ndm_start</name>
   <parameters>
    <parameter>
     <name>suffixes</name>
     <value/>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>wideband</name>
     <value>false</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>events</name>
     <value>false</value>
     <status>Mandatory</status>
    </parameter>
    <parameter>
     <name>clean</name>
     <value>false</value>
     <status>Mandatory</status>
    </parameter>
   </parameters>
   <help>Perform all processing steps for a multiple sets of multiple-session recordings: format conversion, channel extraction and reordering, video transcoding and tracking, data concatenation, spike detection and extraction, etc.

PARAMETERS

# suffixes

List of suffixes for the individual files to convert

OPTIONAL PARAMETERS

Note: To keep the interface simpler, optional parameters have default values and are not listed in the 'Parameters' tab; to choose custom values, click the 'Add' button and manually add the required parameters (and custom values) to the list.

# wideband

Process the wideband data files recorded by the acquisition system: convert to .dat format, resample, merge, extract and reorder channels (default = true)

# video

Process video files recorded by the acquisition system: transcode and extract LEDs (default = true)

# events

Process event files recorded by the acquisition system: convert to .evt format and rename events (default = true)

# concatenation

Concatenate subsession files (default = true)

# spikes

Process spikes: detect and extract spike waveforms, perform PCA (default = true)

# lfp

Downsample wideband signals to produce LFP files (default = true)

# clean

Remove intermediate files after pre-processing is complete (default = false)

# log

Save progress information to log files for later review (use 'cat' or 'less -R' for correct formatting) (default = true)
</help>
  </program>
 </programs>
</parameters>
